---
import MoviePreview from "../../../../components/MoviePreview.astro";
import {
    getLangFromUrl,
    useTranslatedPath,
    useTranslations,
} from "../../../../i18n/util";
import { getMovies } from "../../../../services";
import type { IMovie } from "../../../../utils";

export async function getStaticPaths() {
    const movies: IMovie[] = await getMovies();
    return movies?.map((movie) => {
        return {
            params: { movieId: movie.movieId },
            props: { movie },
        };
    });
}
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const translatePath = useTranslatedPath(lang);
const { movieId } = Astro.params;
const movieDetails = Astro.props.movie;
---


<MoviePreview
    movieDetails = {movieDetails}
></MoviePreview>
